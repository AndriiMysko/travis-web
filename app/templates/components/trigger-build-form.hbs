<TravisForm
  @onSubmit={{perform this.triggerBuild}}
  as |form|
>
  <div class="trigger-build-fields">
    <div class="form-elem">
      <form.field
        data-test-trigger-build-branch="true"
        @label="Branch"
        @placeholder="Select a branch"
        @value={{this.branch}}
        @showValidationStatusIcons={{false}}
        @onChange={{action "change" "branch"}}
        as |field|
      >
        <field.select
          @search={{perform this.searchBranches}}
          as |branch|
        >
          {{branch}}
        </field.select>
      </form.field>
    </div>
    <div class="form-elem">
      <form.field
        data-test-trigger-build-sha="true"
        @label="Commit"
        @placeholder="Specify a Git sha (optiona)"
        @value={{this.sha}}
        @showValidationStatusIcons={{false}}
        @onChange={{action "change" "sha"}}
        as |field|
      >
        {{field.input}}
      </form.field>
    </div>

    <div class="form-elem">
      <form.field
        data-test-trigger-build-message="true"
        @value={{this.message}}
        @label="Message"
        @onChange={{action "change" "message"}}
        @placeholder="Overwrite the commit message (optional)"
        as |field|
      >
        {{field.input}}
      </form.field>
    </div>
    <div class="form-elem">
      <form.field
        data-test-trigger-build-config="true"
        @label="Build Config"
        as |field|
      >
<<<<<<< HEAD
        <RequestConfigValidate @config={{this.config}} />

=======
>>>>>>> 4ee2263ac67f860217fd0c59d276c13ee8ca83c0
        <div class="config-type {{this.configMode}}">
          <span class="yaml">YAML</span>
          <span class="javascript">JSON</span>
        </div>

        {{ivy-codemirror
          value=this.config
          valueUpdated=(action "change" "config")
          options=(hash
            mode=this.configMode
            lineNumbers=true
            tabSize=2
            indentWithTabs=false
            placeholder="Overwrite build config"
          )
        }}
<<<<<<< HEAD
=======

        <RequestConfigValidate @configs={{this.configs}} />

>>>>>>> 4ee2263ac67f860217fd0c59d276c13ee8ca83c0
      </form.field>
    </div>
    <div class="form-elem">
      <h4>
        Merge mode
      </h4>
      {{#radio-button
        value="deep_merge_append"
        groupValue=mergeMode
        changed=(action "change" "mergeMode")
      }}
        Deep Merge & Append
      {{/radio-button}}
      {{#radio-button
        value="deep_merge_prepend"
        groupValue=mergeMode
        changed=(action "change" "mergeMode")
      }}
        Deep Merge & Prepend
      {{/radio-button}}
      {{#radio-button
        value="deep_merge"
        groupValue=mergeMode
        changed=(action "change" "mergeMode")
      }}
        Deep Merge
      {{/radio-button}}
      {{#radio-button
        value="merge"
        groupValue=mergeMode
        changed=(action "change" "mergeMode")
      }}
        Merge
      {{/radio-button}}
      {{#radio-button
        value="replace"
        groupValue=mergeMode
        changed=(action "change" "mergeMode")
      }}
        Replace
      {{/radio-button}}

      <ExternalLinkTo class="hint" href="{{config-get 'urls.triggerBuildMergeModes'}}">
        <SvgImage @name='icon-help' @class='icon-help' />
      </ExternalLinkTo>
    </div>
  </div>
</TravisForm>
